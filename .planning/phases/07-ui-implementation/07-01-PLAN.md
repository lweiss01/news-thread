# Plan: Bias Spectrum UI

## Goal
Implement the core UI components for visualizing article bias and reliability, and integrate them into the `ComparisonScreen`.

## User Review Required
> [!IMPORTANT]
> **Accessibility Strategy**: To ensure color-blind safety without a toggle, we will use **Shape + Color**.
> - **High Reliability**: Solid/Filled Shield (Green)
> - **Medium Reliability**: Half-Filled or "Neutral" Shield (Yellow/Grey)
> - **Low Reliability**: Outlined Shield with specific warning glyph (Red/Orange)

## Proposed Changes

### Presentation Layer
#### [NEW] [ReliabilityBadge.kt](file:///c:/Users/lweis/Documents/newsthread/app/src/main/java/com/newsthread/app/presentation/comparison/ReliabilityBadge.kt)
- Composable that renders the appropriate Shield icon based on 1-5 score.
- Uses `MaterialTheme` colors for accessibility (semantic colors).

#### [NEW] [BiasSpectrumRail.kt](file:///c:/Users/lweis/Documents/newsthread/app/src/main/java/com/newsthread/app/presentation/comparison/BiasSpectrumRail.kt)
- Custom Layout or Canvas component.
- **X-Axis**: Represents Bias (-2 to +2).
- **Nodes**: Circles representing articles, stacked vertically if they overlap significantly.
- **Labels**: "Left", "Center", "Right" indicators.

#### [NEW] [MatchedArticleCard.kt](file:///c:/Users/lweis/Documents/newsthread/app/src/main/java/com/newsthread/app/presentation/comparison/MatchedArticleCard.kt)
- **Collapsed**: Headline, Source, Bias Icon, Reliability Shield.
- **Expanded**: Article Summary (if available), "Read Full Story" button.
- **Animation**: `animateContentSize`.

#### [MODIFY] [ComparisonScreen.kt](file:///c:/Users/lweis/Documents/newsthread/app/src/main/java/com/newsthread/app/presentation/comparison/ComparisonScreen.kt)
- Replace placeholder UI with:
    1.  `BiasSpectrumRail` (Sticky top or scrollable).
    2.  `LazyColumn` of `MatchedArticleCard`s.
- Add "Find more coverage" button for empty states.

### Domain Layer (Updates)
#### [MODIFY] [SourceRating.kt](file:///c:/Users/lweis/Documents/newsthread/app/src/main/java/com/newsthread/app/domain/model/SourceRating.kt)
- Ensure helper methods exist to map float scores to UI states (e.g., `isHighReliability()`).

## Verification Plan

### Automated Tests
- **Screenshot Tests (optional)**: Verify Spectrum Rail rendering for different distributions (all left, all center, spread).
- **Unit Tests**: Verify `ReliabilityBadge` logic maps scores 1-5 to correct icon states.

### Manual Verification
1.  **Spectrum**: Open a story with diverse coverage. Verify articles appear on Left/Center/Right of rail.
2.  **Reliability**: Verify high-quality sources (AP, Reuters) get the "Solid" shield; low-quality get the "Warning" shield.
3.  **Color Blindness**: Use "Simulate Color Space" in Developer Options -> Monochromacy/Deuteranomaly to verify shields are distinguishable by shape.
4.  **Interaction**: Verify card expansion and "Read Story" navigation.
